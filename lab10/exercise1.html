<!DOCTYPE html>
<html lang="en">
<head>
    <title>Generate and Calculate</title>
</head>
<body>
   

    <h1>Number Array Analysis</h1>

    <label for="arraySize">Enter the size of the array (n):</label>
    <input type="number" id="arraySize" min="1" placeholder="Enter a number">
    <br><br>

    <button onclick="generateSequentialArray()">Create Sequential Array</button>
    <button onclick="generateRandomArray()">Create Random Array</button>
    <button onclick="analyzeArray()">Analyze Array</button>

    <h2>Array Output:</h2>
    <p id="arrayOutput">Array will be displayed here...</p>

    <h2>Results:</h2>
    <p id="results">Results will be displayed here...</p>

    <script>
        var httpRequest;
        let array = [];

        function generateSequentialArray() {
            const n = parseInt(document.getElementById('arraySize').value);
            if (isNaN(n) || n <= 0) {
                alert("Please enter a valid number greater than 0.");
                return;
            }
            array = Array.from({ length: n }, (_, i) => i + 1);
            displayArray();
            
            // Convert the array to JSON and send it to the server
            let jsonArray = JSON.stringify(array);
            makeRequest3(jsonArray);
        }

        function generateRandomArray() {
            const n = parseInt(document.getElementById('arraySize').value);
            if (isNaN(n) || n <= 0) {
                alert("Please enter a valid number greater than 0.");
                return;
            }
            array = Array.from({ length: n }, () => Math.floor(Math.random() * n) + 1);
            displayArray();

            // Convert the array to JSON and send it to the server
            let jsonArray = JSON.stringify(array);
            makeRequest3(jsonArray);
        }

        function displayArray() {
            document.getElementById('arrayOutput').textContent = `Array: [${array.join(", ")}]`;
        }

        function makeRequest3(jsonArray) {
            httpRequest = new XMLHttpRequest(); // Create the object
            if (!httpRequest) { // Check if the object was properly created
                alert('Cannot create an XMLHTTP instance');
                return false;
            }
            httpRequest.onreadystatechange = alertContents3;  // Assign callback function
            httpRequest.open('POST', 'server1.php');  // Set the HTTP method and URL
            httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            httpRequest.send('jsonArray=' + jsonArray); // Send the JSON data as URL-encoded
        }

        function alertContents3() {
    try {
        if (httpRequest.readyState === XMLHttpRequest.DONE) {
            if (httpRequest.status === 200) {      
                // Parse JSON response from server
                const response = JSON.parse(httpRequest.responseText);
                
                // Display server response in the results section
                document.getElementById('results').innerHTML = `
                    <strong>Average:</strong> ${response.average}<br>
                    <strong>Median:</strong> ${response.median}<br>
                    <strong>Standard Deviation:</strong> ${response.std_dev}<br>
                    <strong>Min:</strong> ${response.min}<br>
                    <strong>Max:</strong> ${response.max}
                `;
            } else {
                alert('There was a problem with the request.');
            }
        }
    } catch (e) { 
        alert('Caught Exception: ' + e.message);
    }
} 

    </script>

</body>
</html>
